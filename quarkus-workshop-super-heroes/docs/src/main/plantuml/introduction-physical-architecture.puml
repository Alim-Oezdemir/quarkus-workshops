@startuml
!include style.puml

left to right direction

node "Super Hero UI" as ui {
    agent "Angular" <<frontend>> as uiNodejs
}

node "Hero" as hero {
    agent "Quarkus" <<application>> as heroQuarkus
    database "Postgresql" as heroPostgresql
    heroQuarkus .up> heroPostgresql
}

node "Villain" as villain {
    agent "Quarkus" <<application>>  as villainQuarkus
    database "Postgresql" as villainPostgresql
    villainQuarkus .up> villainPostgresql
}

node "Fight" as fight {
    agent "Quarkus" <<application>> as fightQuarkus
    database "Postgresql" as fightPostgresql
    fightQuarkus .up> fightPostgresql
}

node "Statistics" as stat {
    agent "HTML+JQuery" <<frontend>> as statUI
    agent "Quarkus" <<application>> as statQuarkus
    statUI .up> statQuarkus
}

node "Kafka + Zookeeper" as kafka {
}

node "Prometheus" as prometheus {
}


uiNodejs --> fightQuarkus : HTTP
fightQuarkus --> heroQuarkus : HTTP
fightQuarkus --> villainQuarkus : HTTP
fightQuarkus ..> kafka : Message

stat <.. kafka : Message

prometheus .down.> fight : polling
prometheus  .> hero : polling
prometheus .> villain : polling
@enduml
