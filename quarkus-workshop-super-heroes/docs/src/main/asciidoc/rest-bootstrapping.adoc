[[rest-bootstrapping]]
= Bootstrapping the Project

== Architecture Diagram

[[rest-boostrapping-architecture-diagram]]
.Architecture Diagram
image::rest-boostrapping-architecture-diagram.png[]

== Bootstrapping the Hero REST Endpoint

The easiest way to create a new Quarkus project is to use Maven archetype.
Let's say you have a `quarkus-workshop` root directory where you have all your code, create a `api-hero` sub-directory, open a terminal and run the following command:

[source,shell]
----
include::{github-raw}/api-hero/bootstrap.sh[tag=adocSnippet]
----

== Directory Structure

Once you bootstrap the project, you get the following directory structure with a few Java classes and other artifacts :

[source,text]
----
.
└── hero-api
   ├── mvnw
   ├── mvnw.cmd
   ├── pom.xml
   └── src
       ├── main
       │   ├── docker
       │   │   ├── Dockerfile.jvm
       │   │   └── Dockerfile.native
       │   ├── java
       │   │   └── io
       │   │       └── quarkus
       │   │           └── workshop
       │   │               └── superheroes
       │   │                   └── hero
       │   │                       └── HeroResource.java
       │   └── resources
       │       ├── META-INF
       │       │   └── resources
       │       │       └── index.html
       │       └── application.properties
       └── test
           └── java
               └── io
                   └── quarkus
                       └── workshop
                           └── superheroes
                               └── hero
                                   ├── HeroResourceTest.java
                                   └── NativeHeroResourceIT.java
----

The Maven archetype generates the following `api-hero` sub-directory:

* the Maven structure with a `pom.xml`
* an `io.quarkus.workshop.superheroes.hero.HeroResource` resource exposed on `/api/heroes`
* an associated unit test
* the landing page `index.html` that is accessible on http://localhost:8080 after starting the application
* example Dockerfile files for both native and jvm modes in `src/main/docker`
* the `application.properties` configuration file

Once generated, look at the pom.xml. You will find the import of the Quarkus BOM, allowing you to omit the version on the different Quarkus dependencies. In addition, you can see the quarkus-maven-plugin responsible of the packaging of the application and also providing the development mode.

== Development

=== Troubleshooting

You might come accross the following error while developping:

[source,shell]
----
WARN  [io.qu.ne.ru.NettyRecorder] (Thread-48) Localhost lookup took more than one second, you need to add a /etc/hosts entry to improve Quarkus startup time. See https://thoeni.io/post/macos-sierra-java/ for details.
----

If this is the case, it's just a matter to add the node name of your machine to the /etc/hosts. For that, first get the name of your node with the following command:

[source,shell]
----
$ uname -n
my-node.local
----

Then `sudo vi /etc/hosts` so you have the rights to edit the file and add the following entry

[source,shell]
----
127.0.0.1 localhost my-node.local
----
